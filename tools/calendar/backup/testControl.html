<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

<script src="DOMutil.js"> </script>
<script src="calendar.js"> </script>
<link rel="stylesheet" type="text/css" href="calendar.css" media="screen" />
<title>Calendar</title>
</head>

<!-- <body bgcolor="#eeeeee"> -->
<div id="interface">
   <pre> 
       This is a simple example of the calendar, it displays the month along with the astrological sign for each day.
       The 'client' (e.g. this file) implements the basic behaviors....
        --  On month change, it updates each day with the appropriate astrological sign for that day.
        --  When the mouse hovers over a day, a text field updates with that day.
        --  When a day is clicked, the date clicked appears in a pop-up. 
   </pre>
   
   <p> 
       Looking at the source (in this file) should be fairly straightforward. There are dependencies on DOMutil.js, which
       provides basic DOM manipulation routines, and calendar.js which generates/manages the calendar table.
   </p>
   <p>
       The calendar constructor currently takes five parameters (yikes!). I'm still working with getter/setter methods, which
       I think would be more straightforward, but ran into some difficulties. It should be doable with a little work, I just
       wanted to put something up to get some early feedback.
   </p>
   <pre>
       Example: 
           foo = new calendar("my_div",        // DOM element name that is to be the parent for the calendar
                              "myCalendar",    // DOM element name to be assigned to the calender table.
                              "small",         // Size of the calendar, two options "large" and "small"
                              onMonthChange,   // Function to be called when the calendar changes month
                                               // It receives two arguements, the date and an array of DOM elements.
                                               // eg. function onMonthChange(date, elementList)
                                               // The list is '1' based, to correspond with the days of the month.
                                               //
                              onClick,         // Function that is called when a cell is clicked. It receives one
                                               // parameter, the date that was clicked.
                                               // eg. function OnClick(date)
                                               //
                              onHover)         // Function that is called when the mouse is over a cell. It also receives
                                               // one paramert, the date over which the mouse is hovering.
                                               // eg. function onHover(date) 
                              
  </pre>  
<p>
  I realize that a constructor that takes three callback functions is kind of a nightmare. It's not as bad as it sounds,
  and they should all be optional (hopefully, I have some testing to do still).
</p>

          
   
</div>

<div id="test" align="center" bgcolor="#ffffff">
</div>
<div id="test2" align="center" bgcolor="#ffffff">
</div>
    <div align ="center" id="today_id">The date being hovered over will appear here.</div>

<pre>
  Known bugs: 1. The major bug is that the 'current' date (the month the calendar is on) is still a global. So for the moment
                 all calendar's created will be on the same month. I've done no testing with multiple calendars at this point,
                 but everything else that's essential is part of the 'class'.

</pre>

    <script type="text/javascript">

        function monthChangeCallback(date, nodeList)
        {
           for (i=1;i<nodeList.length; i++)
           {
              var month = g_MonthName[date.getMonth()];
              addNode(nodeList[i], "br");
              var tmp = addNode(nodeList[i], "text", month, horoscope(date.getMonth(), i));
           }
        }

        function clickCallback(date)
        {
            alert(formatDate(date));
        }    
          
        function hoverCallback(date)
        {
            var foo = document.getElementById("today_id");
            foo.firstChild.nodeValue = formatDate(date);
        }

        // function to have something to do...
        // month is 0 based int, day is 1 based int.
        //
        function horoscope(month, day)
        {
            if (month == 0) {
                if (day < 21) return "Capricorn";   return "Aquarius";   }
            else if (month == 1) {
                if (day < 20) return "Aquarius";    return "Pieces";     }
            else if (month == 2) {
                if (day < 21) return "Piesces";     return "Aries";      }
            else if (month == 3) {
                if (day < 21) return "Aries";       return "Taurus";     }
            else if (month == 4) {           
                if (day < 22) return "Taurus";      return "Gemini";     }
            else if (month == 5) {           
                if (day < 22) return "Gemini";      return "Cancer";     }
            else if (month == 6) {
                if (day < 23) return "Cancer";      return "Leo";        }
            else if (month == 7) {
                if (day < 23) return "Leo";         return "Virgo";      }
            else if (month == 8) {
                if (day < 24) return "Virgo";       return "Libra";      }
            else if (month == 9) {
                if (day < 24) return "Libra";       return "Scorpio";    }
            else if (month == 10) {
                if (day < 23) return "Scorpio";     return "Sagittarius";}
            else if (month == 11) {
                if (day < 22) return "Sagittarius"; return "Aquarius";   }
        
            return "unknown";
        }

        var cal = new calendar("test", "myCalendar", "small", monthChangeCallback, clickCallback, hoverCallback);
        var cal2 = new calendar("test2", "myCalendar", "small", monthChangeCallback, clickCallback, hoverCallback);

    </script>

</body>
</html>